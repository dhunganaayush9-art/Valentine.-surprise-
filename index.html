<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine Surprise ðŸ’–</title>
<style>
body {
  font-family: Arial, sans-serif;
  text-align: center;
  background: #ffe6eb;
  padding: 20px;
  margin: 0;
}
button {
  padding: 12px 22px;
  margin: 8px;
  font-size: 16px;
  border: none;
  border-radius: 10px;
  background: #ff4d6d;
  color: white;
  cursor: pointer;
}
textarea {
  width: 85%;
  height: 70px;
  font-size: 16px;
  padding: 10px;
  margin: 10px 0;
}
#finalScreen { display:none; }
.fireworks {
  position: relative;
  height: 300px;
  margin-top: 20px;
}
.firework { width:10px; height:10px; background:yellow; border-radius:50%; position:absolute; animation:firework 1s linear infinite;}
@keyframes firework {
  0% {transform: translateY(0) scale(1); opacity:1;}
  50% {transform: translateY(-150px) scale(1.5); opacity:0.7;}
  100% {transform: translateY(0) scale(1); opacity:0;}
}
</style>
</head>
<body>

<h2 id="question"></h2>
<div id="area"></div>

<div id="finalScreen">
  <h2>ðŸŽ†ðŸŽˆ Animations, fireworks and balloons ðŸŽˆðŸŽ†</h2>
  <div class="fireworks" id="fireworksContainer"></div>
  <button id="finalBtn">oiii ðŸ’–</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
// Initialize EmailJS
emailjs.init("rUUSQnZwQQibgwoxL"); // Your Public API Key

let step = 0;
let answers = [];

// Flow with preset + text input for multiple-choice questions
const flow = [
  {q:"I know I make you angry sometimes, but you make me the happiest person alive. Will you be my Valentine?", o:["Yes â¤ï¸","Definitely yes ðŸ’–"]},
  {q:"I love you so much â¤ï¸", o:["I love you too ðŸ’•","I love you even more ðŸ’ž"]},
  {q:"Happy Rose Day ðŸŒ¹! How do I make you feel special today?", o:["You already do! ðŸ’–","Every day is magical with you âœ¨"]},
  {q:"Which moment with me made you happiest?", input:true},
  {q:"Do you feel loved when I hold your hand?", o:["Always ðŸ’•","Every time â¤ï¸"]},
  {q:"Which song reminds you of us?", input:true},
  {q:"Do you remember our first date? How did it feel?", input:true},
  {q:"I want to promise you something todayâ€¦ should I?", o:["Yes, promise me ðŸ’–","Of course, my love ðŸ’•"]},
  {q:"I promise to always support you. Do you trust me?", o:["Always ðŸ’•","100% â¤ï¸"]},
  {q:"Which of my habits makes you smile the most?", input:true},
  {q:"Do you see us together forever?", o:["Forever and always ðŸ’–","Yes, every day â¤ï¸"]},
  {q:"If I could grant you one wish today, what would it be?", input:true},
  {q:"Do you feel my love every single day?", o:["Always ðŸ’•","Every day â¤ï¸"]},
  {q:"Do you know how special you are to me?", o:["Yes ðŸ’–","I feel it every day ðŸ’•"]},
  {q:"What is one thing you love most about me?", input:true},
  {q:"Do you see us celebrating every Valentineâ€™s together?", o:["Yes, every Valentineâ€™s ðŸ’–","Forever together â¤ï¸"]},
  {q:"How would you describe our love in one word?", input:true},
  {q:"Do you feel proud to be with me?", o:["Yes â¤ï¸","Every single day ðŸ’•"]},
  {q:"I love you more than anythingâ€¦ do you feel the same?", o:["Yes â¤ï¸","Even more ðŸ’–"]},
  {q:"Do you secretly enjoy it when I tease you?", o:["Yes ðŸ˜„","A little ðŸ˜˜"]},
  {q:"Whatâ€™s the funniest memory we share?", input:true},
  {q:"If we could travel anywhere together, where would you go?", input:true},
  {q:"Do you feel safe and loved with me?", o:["Always ðŸ’•","Every moment â¤ï¸"]},
  {q:"Do you know I see forever in your eyes?", o:["Yes ðŸ’–","Every time ðŸ’•"]},
  {q:"I love holding you closeâ€¦ do you like it too?", o:["Yes ðŸ’•","Of course â¤ï¸"]},
  {q:"Last questionâ€¦ will you marry me?", input:true}
];

// Render current question
function render(){
  let f = flow[step];
  document.getElementById("area").innerHTML = "";

  if(f.o){ // Buttons
    document.getElementById("question").innerText = f.q;
    f.o.forEach(x=>{
      let b = document.createElement("button");
      b.innerText = x;
      b.onclick = ()=>choose(x);
      document.getElementById("area").appendChild(b);
    });
    // Third option: custom input
    let inputDiv = document.createElement("div");
    inputDiv.innerHTML = `<textarea id="customInput" placeholder="Or type your answer here ðŸ’Œ"></textarea><br><button onclick="submitCustom()">Submit</button>`;
    document.getElementById("area").appendChild(inputDiv);

  } else if(f.input){ // Text input only
    document.getElementById("question").innerText = f.q;
    document.getElementById("area").innerHTML = `<textarea id="txt" placeholder="Write your reply here ðŸ’Œ"></textarea><br><button onclick="submitInput()">Submit</button>`;
  }
}

// Choose button option
function choose(ans){
  answers.push({q: flow[step].q, a: ans});
  step++;
  if(step < flow.length) render();
  else showFinal();
}

// Submit typed input
function submitInput(){
  let v = document.getElementById("txt").value.trim();
  if(!v){ alert("Please write something! ðŸ’–"); return; }
  answers.push({q: flow[step].q, a: v});
  step++;
  if(step < flow.length) render();
  else showFinal();
}

// Submit custom input from multiple-choice
function submitCustom(){
  let v = document.getElementById("customInput").value.trim();
  if(!v){ alert("Please write something! ðŸ’Œ"); return; }
  answers.push({q: flow[step].q, a: v});
  step++;
  if(step < flow.length) render();
  else showFinal();
}

// Show final screen
function showFinal(){
  document.getElementById("question").style.display="none";
  document.getElementById("area").style.display="none";
  document.getElementById("finalScreen").style.display="block";

  // Fireworks animation
  const fw = document.getElementById("fireworksContainer");
  for(let i=0;i<20;i++){
    let dot = document.createElement("div");
    dot.className = "firework";
    dot.style.left = Math.random()*90+"%";
    dot.style.backgroundColor = `hsl(${Math.random()*360},100%,50%)`;
    fw.appendChild(dot);
  }

  // Send email on final button
  document.getElementById("finalBtn").onclick = function() {
    let msg = answers.map(a => `Q: ${a.q}\nA: ${a.a}`).join("\n\n");
    emailjs.send("service_51qmn4e", "template_valentine", {
      to_email: "dhunganaayush9@gmail.com", // Replace with your email
      message: msg
    }).then(function(){
      alert("All answers sent! ðŸ’Œ");
    }, function(error){
      alert("Oops, something went wrong: " + JSON.stringify(error));
    });
  };
}

window.onload = render;
</script>
</body>
</html>
