<script>
let step = 0;
let answers = [];

const flow = [
 {q:"I know I make you angry sometimes, but you make me the happiest person alive. Will you be my Valentine?", o:["Yes â¤ï¸","Definitely yes ðŸ’–"]},
 {q:"I love you so much â¤ï¸", o:["I love you too ðŸ’•","I love you more ðŸ’ž"]},
 {q:"Happy Rose Day ðŸŒ¹ How do I make you feel every day?", o:["Loved ðŸ’–","Special âœ¨"]},
 {q:"What is your favorite memory with me?", input:true},
 {q:"Do you feel safe and loved with me?", o:["Always ðŸ’•","Every moment â¤ï¸"]},
 {q:"What song reminds you of us?", input:true},
 {q:"Last questionâ€¦ will you marry me?", input:true}
];

function render(){
  const area = document.getElementById("area");
  const q = document.getElementById("question");
  area.innerHTML = "";

  let f = flow[step];
  q.innerText = f.q;

  if(f.o){
    f.o.forEach(opt=>{
      let btn = document.createElement("button");
      btn.innerText = opt;
      btn.onclick = () => choose(opt);
      area.appendChild(btn);
    });

    let txt = document.createElement("textarea");
    txt.placeholder = "Or write your answer ðŸ’Œ";
    txt.id = "customInput";
    area.appendChild(document.createElement("br"));
    area.appendChild(txt);

    let submit = document.createElement("button");
    submit.innerText = "Submit";
    submit.onclick = submitCustom;
    area.appendChild(submit);
  } 
  else {
    let txt = document.createElement("textarea");
    txt.id = "textInput";
    txt.placeholder = "Write from your heart ðŸ’–";
    area.appendChild(txt);

    let submit = document.createElement("button");
    submit.innerText = "Submit";
    submit.onclick = submitInput;
    area.appendChild(submit);
  }
}

function choose(ans){
  answers.push({q: flow[step].q, a: ans});
  next();
}

function submitInput(){
  let v = document.getElementById("textInput").value.trim();
  if(!v) return alert("Please write something ðŸ’•");
  answers.push({q: flow[step].q, a: v});
  next();
}

function submitCustom(){
  let v = document.getElementById("customInput").value.trim();
  if(!v) return alert("Please write something ðŸ’•");
  answers.push({q: flow[step].q, a: v});
  next();
}

function next(){
  step++;
  if(step < flow.length) render();
  else finale();
}

function finale(){
  document.getElementById("question").style.display="none";
  document.getElementById("area").style.display="none";
  document.getElementById("finalScreen").style.display="block";
}

window.onload = render;
</script>
